{% extends "base.html" %}
{% block head_title %}Courses{% endblock head_title %}<!--Alt + 0149-->
{% load static %}
{% load urlify %}
{% load crispy_forms_tags %}
{% load course_custom_tags %}

{% block content %}
    <div class="container-fluid">
        <div class="hidden">

            <h1 class='display-1'>{{course.name}}</h1>
            <p>{{course.description}}</p>
            <p>{{course.tag_set.all}}</p><!--tag_set[Tag]-->
            <div class='price-block'>
                {% if course.discount > 0 %}
                    Save {{course.discount}}%
                {% endif %}
                <span class='price'>
                    {% if course.discount > 0 %}
                    || <del>{{course.price|money_sign}}</del>
                    â†’&nbsp; 
                    {% endif %}
                    <span>{% cal_sellprice course.price course.discount as value %}{{value|money_sign}} </span>
                </span>
            </div>
            <br>
            <p>{{course.video_set.all}}</p><!--video_set[Video]-->
            <p>{{course.prerequisite_set.all}}</p><!--prerequisite_set[prerequisite]-->
            <p>{{course.learning_set.all}}</p><!--learning_set[learning]-->
        </div>

        <!-- VideoPlayer-Modules  -->
        <br>
        <div class="card p-3">
            <div class="row">
                <div class="col">
                    <div class="mx-auto">
                        <iframe id="player" class="mx-auto" width="100%" height="315" src="https://www.youtube.com/embed/jMHcborMf0Q?si=W_g9zN787f5Pb2oj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                </div>
                <div class="col-3">

                    <ul class="list-group">
                        {% for video in course.video_set.all %}
                        <li class="list-group-item"><a href="#">{{video}}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        <!-- VideoPlayer-Modules end -->

        <!-- Prerequisites -->
        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Prerequisite:</h5>
                  <h6 class="card-text mb-2 text-body-secondary">
                    {% for pre in course.prerequisite_set.all %}
                    <ol>
                        <li class="">{{pre.description}}</li>
                    </ol>
                    {% endfor %}
                  </h6>
                  {% comment %} <p class="card-text"></p> {% endcomment %}
                  <a href="#" class="card-link">Card link</a>
                  <a href="#" class="card-link">Another link</a>
                </div>
              </div>
        </div>
        <!-- Prerequisites end -->

        <!--  Learnings  -->
        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Learnings:</h5>
                  <h6 class="card-text mb-2 text-body-secondary">
                    {% for lea in course.learning_set.all %}
                    <ol>
                        <li class="">{{lea.description}}</li>
                    </ol>
                    {% endfor %}
                  </h6>
                  {% comment %} <p class="card-text"></p> {% endcomment %}
                  <a href="#" class="card-link">Card link</a>
                  <a href="#" class="card-link">Another link</a>
                </div>
              </div>
        </div>

        <!--  Learnings end -->
        <br>
        <br>
        <br>
    </div>

    <!-- Maintaining Player Height -->
    <script>
        window.onload= ()=> {
            player = document.getElementById('player')
            maintainRatio()
        }

        
        function maintainRatio(){

            var w =player.clientWidth
            var h =(w*9)/16
            console.log({w, h})
            player.height = h
            
        }
        
        window.onresize = maintainRatio
    </script>
{% endblock %}